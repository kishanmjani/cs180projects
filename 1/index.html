<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Project 1: Colorizing the Prokudin-Gorskii photo collection</title>

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

    <script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js"
        integrity="sha384-0pzryjIRos8mFBWMzSSZApWtPl/5++eIfzYmTgBBmXYdhvxPc+XcFEk+zJwDgWbP"
        crossorigin="anonymous"></script>
    <script src="project-data.js"></script>
</head>

<body>
    <header>
        <h1>Project 1: Colorizing the Prokudin-Gorskii photo collection</h1>
        <p>Kishan Jani</p>
    </header>

    <div class="container">

        <!-- Contents -->
        <main>
            <section id="intro">
                <h2>Introduction</h2>
                <p>
                    The goal of this assignment is to take the digitized Prokudin-Gorskii glass 
                    plate images and, using image processing techniques, automatically produce a
                    color image with as few visual artifacts as possible. In order to do this, you
                    will need to extract the three color channel images, place them on top of
                    each other, and align them so that they form a single RGB color image.
                </p>
            </section>

            <section id="section-1">
                <h2>Section 1: Methods Used </h2>

                <h3>(i) Single-Scale Alignment for low-resolution images: </h3>
                <p>
                    For smaller images (stored in .jpg format: cathedral.jpg, monastery.jpg, tobolsk.jpg), a simple 'single-scale'
implementation was used, which involved searching for the optimal displacement (judged by a similarity metric)
within a search space. 
<br>
 1. Search space used was [-15,15]
                    <br>
 2. Similarity metric: tried <math><mi>L^2</mi></math> norm, L1 norm, and normalized cross-correlation. The one that worked best was 
the L1 norm. Why? The L2 norm penalizes outlying pixels a lot more than the L1 norm. This ensures that a certain
displacement is not misjudged due to outlier behavior towards the borders of the image. 
                    <br>
 3. Tried using a Sobel filter in this situation, produced worse images for some reason. 
                    <br>
                </p>
                <div class="gallery">
                    <img src="media/images/out_cathedral.jpg" alt="cathedral.jpg" />
                </div>

                <h3>(ii) Image Pyramid Alignment for high-resolution images: </h3>
                For larger images (stored in .tif format), a naive single-scale approach is  not efficient for two primary reasons: 
<br>
1. The pixel array has larger shape, which makes our exhaustive search take longer. 
                <br>
2. The optimal displacement is likely larger than what the initial search space [-15,15] explores; for instance, 
(50,23) for RED and (107,40) for GREEN works well for emir.tif. Thus we would need to expand our search space to 
something of the order [-100,100] to produce a sharp image with exhaustive search, which blows up the runtime. 
<br>
The remedy to these issues comes from using an image pyramid. The idea is to repeatedly scale the image (factor 
of 2 chosen) until the pixel array is of reasonably small dimensions. Then, we find the optimal displacement (d)
for the scaled versions using a smaller search space. For the original image, the corresponding displacement we
implement is D = 2**(doubling_factor)*d. This is done using all doubling factors 0,1,2,..., L, with the optimal
displacements added from each step. This allows us to explore a wider range of displacements while saving on 
computational cost. 
<br>
Empirically, L=6 was the maximum depth of doubling chosen. 
            </section>

            <section id="section-2">
                <h2>Section 2: Images</h2>

                <h3>Approach</h3>
                <p>
                    Here we present all generated images. 
                    <br>
                    <a href="./media/index.html">Images</a>
                </p>

                <h3>Data</h3>
                <table id="data-table" class="comparison">
                    <tr>
                        <th scope = 'col'>Image </th>
                        <th scope = 'col'>GREEN Displacement</th>
                        <th scope = 'col'>RED Displacement</th>
                        <th scope = 'col'>Approach Used</th>
                    </tr>
                    
                    <tr>
                        <th scope = 'row'> cathedral.jpg </th>
                        <th score = 'row'> (1,0) </th>
                        <th score = 'row'> (8,-1) </th>
                        <th score = 'row'> Single-Scale Exhaustive search </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> monastery.jpg </th>
                        <th score = 'row'> (-3,1) </th>
                        <th score = 'row'> (3,2) </th>
                        <th score = 'row'> Single-Scale Exhaustive search </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> tobolsk.jpg </th>
                        <th score = 'row'> (3,2) </th>
                        <th score = 'row'> (6,3) </th>
                        <th score = 'row'> Single-Scale Exhaustive search </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> church.tif </th>
                        <th score = 'row'> (25,3) </th>
                        <th score = 'row'> (58,-4) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> emir.tif </th>
                        <th score = 'row'> (50,23) </th>
                        <th score = 'row'> (107,40) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> harvesters.tif </th>
                        <th score = 'row'> (60,17) </th>
                        <th score = 'row'> (124,11) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> icon.tif </th>
                        <th score = 'row'> (41,16) </th>
                        <th score = 'row'> (90,23) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> lady.tif </th>
                        <th score = 'row'> (59,-10) </th>
                        <th score = 'row'> (123,-21) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> melons.tif </th>
                        <th score = 'row'> (80,10) </th>
                        <th score = 'row'> (177,12) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> onion_church.tif </th>
                        <th score = 'row'> (52,24) </th>
                        <th score = 'row'> (107,35) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> sculpture.tif </th>
                        <th score = 'row'> (33,-11) </th>
                        <th score = 'row'> (140,-26) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> self_portrait.tif </th>
                        <th score = 'row'> (78,29) </th>
                        <th score = 'row'> (176,37) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> three_generations.tif </th>
                        <th score = 'row'> (55,12) </th>
                        <th score = 'row'> (111,8) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> train.tif </th>
                        <th score = 'row'> (41,1) </th>
                        <th score = 'row'> (85,29) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> camel.tif </th>
                        <th score = 'row'> (22,15) </th>
                        <th score = 'row'> (81,39) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> creepy_nun.tif </th>
                        <th score = 'row'> (48,19) </th>
                        <th score = 'row'> (109,34) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                    <tr>
                        <th scope = 'row'> view.tif </th>
                        <th score = 'row'> (34,-14) </th>
                        <th score = 'row'> (78,-25) </th>
                        <th score = 'row'> Image Pyramid </th>
                    </tr>
                </table>
            </section>

            <section id="conclusion">
                <h2>Conclusion</h2>
                <p>
                    Summarize your findings, discuss the implications of your results, and
                    suggest potential areas for future work or improvement.
                </p>
            </section>
        </main>
    </div>

</body>

</html>
